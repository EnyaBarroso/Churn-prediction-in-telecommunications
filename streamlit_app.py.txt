import streamlit as st
import pandas as pd
import joblib

# Título y descripción
st.title("📊 Predicción de Churn en Telecomunicaciones")
st.write("""
Aplicación interactiva para predecir clientes en riesgo de abandono.
""")

# 1. Carga de datos/modelo
@st.cache_data
def load_data():
    df = pd.read_csv("datos.csv")  # Asegúrate de tener este archivo
    return df

@st.cache_resource
def load_model():
    model = joblib.load("modelo_final_churn.pkl")  # Usa tu modelo real
    return model

# 2. Visualización de datos
if st.checkbox("Mostrar datos"):
    df = load_data()
    st.dataframe(df.head())

# 3. Predicción interactiva (ejemplo básico)
st.subheader("Simulador de Churn")
tenure = st.slider("Meses como cliente", 1, 72, 12)
monthly_charges = st.number_input("Cargo mensual (USD)", 20.0, 120.0, 70.0)

if st.button("Predecir"):
    model = load_model()
    prediction = model.predict([[tenure, monthly_charges]])[0]
    st.success(f"Predicción: {'Churn' if prediction == 1 else 'No Churn'}")